#:kivy 1.0.9
#: import utils kivy.utils
#: import os os
#: set backgroundColor "#521808" #"#521808"
#: set color1 "#382f32"

Root:

<CoverImage@CoverBehavior+Image>:
    reference_size: self.texture_size

<VBoxLayout@BoxLayout>:
    orientation: "vertical"

<ValueLabel@Label>:
    font_size: dp(30)
    bold: True
    color: 1 , 0, 0, 1 #utils.get_color_from_hex(backgroundColor)

<TitleLabel@Label>:
    padding: dp(10), dp(10)
    font_size: dp(25)
    bold: True
    size_hint_y: 0.2
    
<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: os.getcwd()
            filters: ["*.jpg", "*.jpeg", "*.svg", "*.png"] if root.file_type =="image_file" else ["*.h5", "*.pth"]
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<Root>:
    VBoxLayout:
        VBoxLayout:
            canvas.before:
                Color: 
                    rgb: utils.get_color_from_hex(backgroundColor)
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: .3
            #height: dp(300)
            GridLayout:
                # size_hint_max_x: dp(100)
                # size_hint_min_x: dp(70)
                #size_hint_y: None
                size_hint_x: .5            
                #height: dp(100)
                pos_hint: {"center_x": .5, "center_y": .5}
                padding: dp(10), dp(10)
                cols: 2
                Button:
                    text: 'Load AI Model'
                    #on_press: root.reset()
                    on_release: root.show_load_file()
                Button:
                    #spacing: dp(50)
                    text: 'Load Image'
                    #on_press: root.reset()
                    on_release: root.show_load_image()
                    
            Label:
                id: selected_file
                text: "Selected model: "
                size_hint: None, None
                size: self.texture_size
                pos_hint: {"center_x": .5, "center_y": .5}
                font_size: dp(15)
                #bold: True 
                padding: dp(10), dp(10)
            BoxLayout:
                padding: dp(10), dp(10)
                # size_hint_y: None
                # height: dp(100)
                size_hint_x: .25 
                pos_hint: {"center_x": .5, "center_y": .5}
                Button:
                    text: 'Predict'
                    on_release: root.predict()
            
            # Label:
            #     id: selected_img
            #     text: " "
        GridLayout:
            cols: 3
            size_hint_y: .5
            pos_hint: {"center_x": .5, "center_y": .5}
            canvas.before:
                Color: 
                    rgb: utils.get_color_from_hex(color1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            VBoxLayout:
                #size_hint_x: .6
                TitleLabel:
                    text: "Selected Image" 
                Image:
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(color1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    id: image
                    source: "waiting1.png" 
                    pos_hint: {"center_x": .5, "center_y": .5}
            BoxLayout:
                size_hint_x: 0.01
                canvas:
                    Color: 
                        rgb: 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            VBoxLayout:
                #size_hint_x: .45
                VBoxLayout:
                    TitleLabel:
                        text: "Predicted class"
                    ValueLabel:
                        id: class_label
                        text: " " 
                VBoxLayout:
                    TitleLabel:
                        text: "Accuracy"
                    ValueLabel:
                        id: accuracy_label
                        text: " "

